Archivo de config

1. El archivo de configuraci√≥n: tokens.config.json

Crea este archivo en la ra√≠z de tu proyecto. Es limpio, descriptivo y f√°cil de editar por cualquier miembro del equipo.
JSON

{
  "jsonDir": "./FigmaJsons",
  "outputFile": "./output/variables.css",
  "settings": {
    "maxDepth": 50,
    "allowJsonRepair": true,
    "namespace": ""
  }
}

2. Actualizaci√≥n del Script (TypeScript)

Vamos a a√±adir una interfaz para el tipado y una funci√≥n de carga que fusione los valores del JSON con valores por defecto (por seguridad).
Paso A: Definir la Interfaz de Configuraci√≥n

A√±ade esto cerca de tus otros tipos:
TypeScript

interface AppConfig {
    jsonDir: string;
    outputFile: string;
    settings: {
        maxDepth: number;
        allowJsonRepair: boolean;
        namespace?: string;
    };
}

const DEFAULT_CONFIG: AppConfig = {
    jsonDir: './FigmaJsons',
    outputFile: './output/variables.css',
    settings: {
        maxDepth: 50,
        allowJsonRepair: false
    }
};

Paso B: Crear el Cargador de Configuraci√≥n

Esta funci√≥n busca el archivo y, si no existe, usa los valores por defecto (haciendo el script resiliente).
TypeScript

function loadConfig(): AppConfig {
    const configPath = path.resolve(__dirname, 'tokens.config.json');
    
    if (!fs.existsSync(configPath)) {
        console.warn('‚ö†Ô∏è  tokens.config.json no encontrado. Usando configuraci√≥n por defecto.');
        return DEFAULT_CONFIG;
    }

    try {
        const fileContent = fs.readFileSync(configPath, 'utf-8');
        const userConfig = JSON.parse(fileContent);
        
        // Merge profundo simple para asegurar que existan los objetos internos
        return {
            ...DEFAULT_CONFIG,
            ...userConfig,
            settings: { ...DEFAULT_CONFIG.settings, ...userConfig.settings }
        };
    } catch (err) {
        console.error('‚ùå Error al parsear tokens.config.json. Usando valores por defecto.');
        return DEFAULT_CONFIG;
    }
}

Paso C: Integraci√≥n en main()

Ahora, tu funci√≥n main se vuelve totalmente din√°mica.
TypeScript

async function main() {
    const config = loadConfig(); // 1. Cargamos la configuraci√≥n
    const summary = createSummary();

    // 2. Resolvemos rutas din√°micamente
    const resolvedJsonDir = path.resolve(__dirname, config.jsonDir);
    const resolvedOutputFile = path.resolve(__dirname, config.outputFile);

    console.log('üìñ Leyendo archivos JSON...');
    const combinedTokens = readAndCombineJsons(resolvedJsonDir);

    // ... el resto del proceso usa config.settings.maxDepth, etc.
}
--------------------------------------------------

Source maps

